import{u as w,r as d,l as x,m as b,o as y,c as k,a as s,h as u,w as f,v as m,n as v,t as h,q as T,s as j,x as S,p as E,d as I}from"./index-Cv-0C1nB.js";import{_ as C,T as M,t as N,u as O,a as V}from"./toast-BCnJC-rN.js";import{T as z}from"./TitleImage-2vhTld8k.js";async function A(l,r,i=null){try{let a={method:r,headers:{"Content-Type":"application/json"},cache:"no-cache"};i&&(a.body=JSON.stringify(i));const e=await fetch(l,a);if(!e.ok){let c=await e.json();throw new Error(c.message)}return await e.json()}catch(a){throw a}}const p=l=>(E("data-v-851ff2cb"),l=l(),I(),l),B={class:"login-container pt-5 d-md-flex justify-content-md-around"},D={class:"login-form-size fm-Noto-Sans-TC"},P=p(()=>s("h2",{class:"fs-20 fw-bold text-center mt-3 mb-32 mt-md-60"},"最實用的線上代辦事項服務",-1)),R={class:"login-form d-flex flex-column justify-content-center align-items-start"},U={class:"d-flex flex-column w-100"},W=p(()=>s("label",{class:"mb-1 login-label",for:"login-email"},"Email",-1)),$={class:"d-flex flex-column w-100 my-4"},q=p(()=>s("label",{class:"mb-1 login-label",for:"login-password"},"Password",-1)),H=["disabled"],J={__name:"login",setup(l){const r=w(),i=d(!1),a=d({email:"",password:""}),e=d({email:{state:!1,alert:""},password:{state:!1,alert:""}});x(a.value,t=>{Object.keys(t).forEach(o=>{t[o]===""?e.value[o].state=!1:(e.value[o].state=!0,e.value[o].alert="")})});async function c(){try{N("登入中"),i.value=!0;const t=await A("https://todolist-api.hexschool.io/users/sign_in","POST",a.value);t.status&&(O("登入成功"),document.cookie=`TokenCode=${t.token}`,r.push("/home"))}catch(t){V(t)}finally{i.value=!1}}function g(){return Object.keys(e.value).forEach(t=>{e.value[t].state?e.value[t].alert="":e.value[t].alert="欄位不可以為空"}),Object.values(e.value).every(t=>t.state)}return(t,o)=>{const _=b("router-link");return y(),k("div",B,[s("div",null,[u(M,{fontSize:32,checkWidth:40,checkHeight:40}),u(z,{width:386,height:386})]),s("div",D,[P,s("form",R,[s("div",U,[W,f(s("input",{id:"login-email",class:"login-input",type:"text",placeholder:"請輸入Email","onUpdate:modelValue":o[0]||(o[0]=n=>a.value.email=n)},null,512),[[m,a.value.email]]),s("p",{class:v(["noActive",{active:!e.value.email.state}])},h(e.value.email.alert),3)]),s("div",$,[q,f(s("input",{id:"login-password",class:"login-input",type:"password",placeholder:"請輸入密碼","onUpdate:modelValue":o[1]||(o[1]=n=>a.value.password=n)},null,512),[[m,a.value.password]]),s("p",{class:v(["noActive",{active:!e.value.password.state}])},h(e.value.password.alert),3)]),s("button",{class:"login-btn align-self-center py-12 px-5 bg-dark text-white",disabled:i.value,onClick:o[2]||(o[2]=T(n=>g()?c():null,["prevent"]))},"登入",8,H),u(_,{to:"register",class:"fw-bold text-dark align-self-center mt-4 text-decoration-none"},{default:j(()=>[S("註冊帳號")]),_:1})])])])}}},K=C(J,[["__scopeId","data-v-851ff2cb"]]);export{K as default};
