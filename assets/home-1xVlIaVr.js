import{r as _,o as c,c as r,a as o,t as $,F as D,p as x,b as C,d as E,e as g,f as T,g as w,w as F,h as M,v as z,i as B,n as y,j as L,k as N,l as V}from"./index-PcMA6G9H.js";import{_ as j,T as O}from"./TodoList-Title-_2qcq-r8.js";const K="/vite-todolist/assets/8911ab6dcbda98df56e26aa23c6643ac-CwWZoW3o.png",f=n=>(x("data-v-40756a4f"),n=n(),C(),n),P={key:0},W=["value"],H={key:0,class:"test"},J={key:1,class:"test2"},U=f(()=>o("span",{class:"material-icons-outlined"},"drive_file_rename_outline",-1)),Z=[U],q=f(()=>o("span",{class:"material-icons-outlined"}," edit_off ",-1)),G=[q],Q=f(()=>o("span",{class:"material-icons-outlined delete-icon"},"clear",-1)),R=[Q],X=f(()=>o("div",null,null,-1)),Y={__name:"listItem",props:{sendData:{type:Object,default:()=>({})}},emits:{changeComplete:n=>{if(typeof n=="object")return!0},deleteItem:n=>{if(typeof n=="object")return!0}},setup(n,{emit:u}){const i=_(!1),l=n,d=u;function h(){d("changeComplete",l.sendData)}function m(){d("deleteItem",l.sendData)}function p(){i.value=!i.value}return(b,k)=>(c(),r(D,null,[o("li",null,[i.value?(c(),r("div",P,[o("input",{class:"edit-input",type:"text",value:l.sendData.content},null,8,W)])):(c(),r("div",{key:1,onClick:h},[l.sendData.status?(c(),r("div",J)):(c(),r("div",H)),o("p",null,$(l.sendData.content),1)])),i.value?(c(),r("button",{key:3,class:"edit-off-link",onClick:p},G)):(c(),r("button",{key:2,class:"edit-link",onClick:p},Z)),o("button",{class:"delete-link",onClick:m},R)]),X],64))}},tt=j(Y,[["__scopeId","data-v-40756a4f"]]),v=n=>(x("data-v-8b142fee"),n=n(),C(),n),et={class:"home-container"},ot={class:"input-box"},st=v(()=>o("span",{class:"material-icons-outlined"},"add",-1)),nt=[st],at={key:0},it=v(()=>o("h3",{class:"text-center"},"目前尚無代辦事項",-1)),lt=v(()=>o("img",{class:"imgtest",src:K},null,-1)),ct=[it,lt],rt={key:1,class:"list-box"},dt={class:"filter-btnbox"},ut={class:"todo-list"},ht={class:"d-flex align-items-baseline px-3"},pt=v(()=>o("button",{class:"ms-auto border-0 bg-white"},"清除已完成項目",-1)),_t={__name:"home",setup(n){const u=_(""),i=_([]),l=_("all");E(async()=>{try{let t=await fetch("https://todolist-api.hexschool.io/todos/",{headers:{Authorization:`${token}`}});if(!t.ok){let s=await t.json();console.log("錯誤資訊",s)}(await t.json()).data.forEach(s=>i.value.push(s))}catch{}});async function d(){try{let t=await fetch("https://todolist-api.hexschool.io/todos/",{headers:{Authorization:`${token}`}});if(!t.ok){let s=await t.json();console.log("錯誤資訊",s)}const e=await t.json();i.value=[],e.data.forEach(s=>i.value.push(s))}catch{}}const h=t=>{l.value=t},m=g(()=>{if(l.value==="all")return i.value;if(l.value==="pending")return i.value.filter(t=>{if(!t.status)return t});if(l.value==="finish")return i.value.filter(t=>{if(t.status)return t})}),p=g(()=>i.value.filter(e=>{if(!e.status)return e}).length),b=g(()=>i.value.length===0);async function k(){try{const t={content:u.value},e=await fetch("https://todolist-api.hexschool.io/todos/",{cache:"no-cache",body:JSON.stringify(t),headers:{"content-type":"application/json",Authorization:`${token}`},method:"POST"});if(!e.ok){let a=await e.json();console.log("錯誤資訊",a)}const s=await e.json();console.log(s),s.status&&d()}catch{}}async function I(t){try{let e=t.id,s=await fetch(`https://todolist-api.hexschool.io/todos/${e}/toggle`,{cache:"no-cache",headers:{"content-type":"application/json",Authorization:`${token}`},method:"PATCH"});if(!s.ok){let S=await s.json();console.log("錯誤資訊",S)}const a=await s.json();console.log(a),a.status&&d()}catch{}}async function A(t){try{const e=await fetch(`https://todolist-api.hexschool.io/todos/${t.id}`,{cache:"no-cache",headers:{"content-type":"application/json",Authorization:`${token}`},method:"DELETE"});if(!e.ok){let a=await e.json();console.log("錯誤資訊",a)}const s=await e.json();console.log(s),s.status&&d()}catch{}}return(t,e)=>{const s=T("router-link");return c(),r("div",et,[o("header",null,[w(O),w(s,{style:{color:"red"},to:"login"},{default:F(()=>[N("登出")]),_:1})]),o("div",ot,[M(o("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>u.value=a),onKeyup:B(k,["enter"])},null,544),[[z,u.value]]),o("button",{class:"addinput",onClick:k},nt)]),b.value?(c(),r("div",at,ct)):(c(),r("div",rt,[o("div",dt,[o("button",{class:y([{buttonActive:l.value==="all"}]),onClick:e[1]||(e[1]=a=>h("all"))},"全部",2),o("button",{class:y([{buttonActive:l.value==="pending"}]),onClick:e[2]||(e[2]=a=>h("pending"))},"待完成",2),o("button",{class:y([{buttonActive:l.value==="finish"}]),onClick:e[3]||(e[3]=a=>h("finish"))},"已完成",2)]),o("ul",ut,[(c(!0),r(D,null,L(m.value,a=>(c(),V(tt,{key:a.id,sendData:a,onChangeComplete:I,onDeleteItem:A},null,8,["sendData"]))),128))]),o("div",ht,[o("p",null,$(p.value)+"個待完成項目",1),pt])]))])}}},mt=j(_t,[["__scopeId","data-v-8b142fee"]]);export{mt as default};
