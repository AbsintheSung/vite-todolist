import{u as w,r as p,k as g,o as x,c as y,a as t,g as d,w as f,v as m,n as v,t as h,l as k,m as b,q as T,p as A,d as S}from"./index-BVgVmJ09.js";import{_ as j,T as C,t as E,u as I,a as M}from"./toast-C4CB-_vG.js";import{T as N}from"./TitleImage-DmwHqwwJ.js";async function V(o,r,l=null){try{let e={method:r,headers:{"Content-Type":"application/json"},cache:"no-cache"};l&&(e.body=JSON.stringify(l));const n=await fetch(o,e);if(!n.ok){let c=await n.json();throw new Error(c.message)}return await n.json()}catch(e){throw e}}const u=o=>(A("data-v-cef6613e"),o=o(),S(),o),O={class:"login-container pt-5 d-md-flex justify-content-md-around"},z={class:"login-form-size fm-Noto-Sans-TC"},B=u(()=>t("h2",{class:"fs-20 fw-bold text-center mt-3 mb-32 mt-md-60"},"最實用的線上代辦事項服務",-1)),D={class:"d-flex flex-column justify-content-center align-items-start"},P={class:"d-flex flex-column w-100"},U=u(()=>t("label",{class:"mb-1"},"Email",-1)),W={class:"d-flex flex-column w-100 my-4"},$=u(()=>t("label",{class:"mb-1"},"Password",-1)),q=["disabled"],H={__name:"login",setup(o){const r=w(),l=p(!1),e=p({email:{content:"",alert:"",isAlert:!1,state:!1},password:{content:"",alert:"",isAlert:!1,state:!1}});async function n(){let s={email:e.value.email.content,password:e.value.password.content};try{E("登入中"),l.value=!0;const a=await V("https://todolist-api.hexschool.io/users/sign_in","POST",s);a.status&&(I("登入成功"),document.cookie=`TokenCode=${a.token}`,r.push("/home"))}catch(a){M(a)}finally{l.value=!1}}function c(){return Object.keys(e.value).forEach(function(s){e.value[s].content===""?(e.value[s].isAlert=!0,e.value[s].alert="欄位不可以為空"):(e.value[s].state=!0,e.value[s].isAlert=!1,e.value[s].alert="")}),Object.values(e.value).every(s=>s.state)}return(s,a)=>{const _=g("router-link");return x(),y("div",O,[t("div",null,[d(C,{fontSize:32,checkWidth:40,checkHeight:40}),d(N,{width:386,height:386})]),t("div",z,[B,t("form",D,[t("div",P,[U,f(t("input",{type:"text",placeholder:"請輸入Email","onUpdate:modelValue":a[0]||(a[0]=i=>e.value.email.content=i)},null,512),[[m,e.value.email.content]]),t("p",{class:v(["noActive",{active:e.value.email.isAlert}])},h(e.value.email.alert),3)]),t("div",W,[$,f(t("input",{type:"password",placeholder:"請輸入密碼","onUpdate:modelValue":a[1]||(a[1]=i=>e.value.password.content=i)},null,512),[[m,e.value.password.content]]),t("p",{class:v(["noActive",{active:e.value.password.isAlert}])},h(e.value.password.alert),3)]),t("button",{class:"align-self-center py-12 px-5 bg-dark text-white",disabled:l.value,onClick:a[2]||(a[2]=k(i=>c()?n():null,["prevent"]))},"登入",8,q),d(_,{to:"register",class:"fw-bold text-dark align-self-center mt-4 text-decoration-none"},{default:b(()=>[T("註冊帳號")]),_:1})])])])}}},F=j(H,[["__scopeId","data-v-cef6613e"]]);export{F as default};
