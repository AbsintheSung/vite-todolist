import{u as b,r as _,k as w,o as x,c as g,a as t,g as f,w as d,v as u,n as p,t as v,l as k,m as y,q as A,p as P,d as T}from"./index-C-Jztfnn.js";import{_ as W,T as S,t as j,u as V,a as C}from"./toast-CxjdChUS.js";import{T as E}from"./TitleImage-DwnNqLju.js";async function I(o,m,n=null){try{let e={method:m,headers:{"Content-Type":"application/json"},cache:"no-cache"};n&&(e.body=JSON.stringify(n));const r=await fetch(o,e);if(!r.ok){let c=await r.json();throw console.log("註冊錯誤資訊",c),new Error(c.message)}return await r.json()}catch(e){throw e}}const i=o=>(P("data-v-eb8ae01e"),o=o(),T(),o),M={class:"register-container pt-5 pt-md-0 d-md-flex justify-content-md-around"},N={class:"pt-md-111"},O={class:"register-form-size fm-Noto-Sans-TC pt-md-81"},U=i(()=>t("h3",{class:"fs-20 fw-bold text-center mt-3 mb-26 mt-md-0 mb-md-4"},"註冊帳號",-1)),z={class:"d-flex flex-column justify-content-center align-items-start"},B={class:"d-flex flex-column w-100 mb-4"},D=i(()=>t("label",{class:"mb-1"},"Email",-1)),q={class:"d-flex flex-column w-100 mb-4"},H=i(()=>t("label",{class:"mb-1"},"您的暱稱",-1)),J={class:"d-flex flex-column w-100 mb-4"},L=i(()=>t("label",{class:"mb-1"},"Password",-1)),R={class:"d-flex flex-column w-100 mb-4"},$=i(()=>t("label",{class:"mb-1"},"再次輸入密碼",-1)),F=["disabled"],G={__name:"register",setup(o){const m=b(),n=_(!1),e=_({email:{content:"",alert:"",isAlert:!1,state:!1},nickname:{content:"",alert:"",isAlert:!1,state:!1},password:{content:"",alert:"",isAlert:!1,state:!1},doublePassWord:{content:"",alert:"",isAlert:!1,state:!1}});async function r(){let a={email:e.value.email.content,nickname:e.value.nickname.content,password:e.value.password.content};try{n.value=!0,j("註冊中"),(await I("https://todolist-api.hexschool.io/users/sign_up","POST",a)).status&&(V("註冊成功"),m.push("/"))}catch(s){C(s)}finally{n.value=!1}}function c(){return Object.keys(e.value).forEach(function(a){e.value[a].content===""?(e.value[a].isAlert=!0,e.value[a].alert="欄位不可以為空"):(e.value[a].state=!0,e.value[a].isAlert=!1,e.value[a].alert="")}),e.value.doublePassWord.content!=e.value.password.content&&e.value.password.content!=""&&(e.value.doublePassWord.isAlert=!0,e.value.doublePassWord.state=!1,e.value.doublePassWord.alert="密碼與設定不相同"),Object.values(e.value).every(a=>a.state)}return(a,s)=>{const h=w("router-link");return x(),g("div",M,[t("div",N,[f(S,{fontSize:32,checkWidth:40,checkHeight:40}),f(E,{width:386,height:386})]),t("div",O,[U,t("form",z,[t("div",B,[D,d(t("input",{type:"text",placeholder:"請輸入Email","onUpdate:modelValue":s[0]||(s[0]=l=>e.value.email.content=l)},null,512),[[u,e.value.email.content]]),t("p",{class:p(["noActive",{active:e.value.email.isAlert}])},v(e.value.email.alert),3)]),t("div",q,[H,d(t("input",{type:"text",placeholder:"請輸入您的暱稱","onUpdate:modelValue":s[1]||(s[1]=l=>e.value.nickname.content=l)},null,512),[[u,e.value.nickname.content]]),t("p",{class:p(["noActive",{active:e.value.nickname.isAlert}])},v(e.value.nickname.alert),3)]),t("div",J,[L,d(t("input",{type:"password",placeholder:"請輸入密碼","onUpdate:modelValue":s[2]||(s[2]=l=>e.value.password.content=l)},null,512),[[u,e.value.password.content]]),t("p",{class:p(["noActive",{active:e.value.password.isAlert}])},v(e.value.password.alert),3)]),t("div",R,[$,d(t("input",{type:"password",placeholder:"請再次輸入密碼","onUpdate:modelValue":s[3]||(s[3]=l=>e.value.doublePassWord.content=l)},null,512),[[u,e.value.doublePassWord.content]]),t("p",{class:p(["noActive",{active:e.value.doublePassWord.isAlert}])},v(e.value.doublePassWord.alert),3)]),t("button",{class:"align-self-center py-12 px-5 bg-dark text-white",disabled:n.value,onClick:s[4]||(s[4]=k(l=>c()?r():null,["prevent"]))},"註冊帳號",8,F),f(h,{to:"/",class:"fw-bold text-dark align-self-center mt-4 text-decoration-none"},{default:y(()=>[A("登入")]),_:1})])])])}}},Y=W(G,[["__scopeId","data-v-eb8ae01e"]]);export{Y as default};
