import{u as w,r as p,j as g,o as x,c as b,a as t,f as d,g as f,v as m,n as v,t as h,k as y,l as k,m as T,p as A,b as S}from"./index-cWwjqs2d.js";import{_ as j,T as C}from"./TodoList-Title-DT4f7pLn.js";import{T as I}from"./TitleImage-Dw57jZpf.js";async function E(a,c,n=null){try{let e={method:c,headers:{"Content-Type":"application/json"},cache:"no-cache"};n&&(e.body=JSON.stringify(n));const l=await fetch(a,e);if(!l.ok){let i=await l.json();throw console.log("登入錯誤資訊",i),new Error(i.message)}return await l.json()}catch(e){throw e}}const u=a=>(A("data-v-d5e2a0bc"),a=a(),S(),a),N={class:"login-container pt-5 d-md-flex justify-content-md-around"},V={class:"login-form-size fm-Noto-Sans-TC"},O=u(()=>t("h2",{class:"fs-20 fw-bold text-center mt-3 mb-32 mt-md-60"},"最實用的線上代辦事項服務",-1)),z={class:"d-flex flex-column justify-content-center align-items-start"},B={class:"d-flex flex-column w-100"},D=u(()=>t("label",{class:"mb-1"},"Email",-1)),M={class:"d-flex flex-column w-100 my-4"},P=u(()=>t("label",{class:"mb-1"},"Password",-1)),U=["disabled"],$={__name:"login",setup(a){const c=w(),n=p(!1),e=p({email:{content:"",alert:"",isAlert:!1,state:!1},password:{content:"",alert:"",isAlert:!1,state:!1}});async function l(){let s={email:e.value.email.content,password:e.value.password.content};try{const o=await E("https://todolist-api.hexschool.io/users/sign_in","POST",s);o.status&&(document.cookie=`TokenCode=${o.token}`,c.push("/home"))}catch(o){console.error(o)}}function i(){return Object.keys(e.value).forEach(function(s){e.value[s].content===""?(e.value[s].isAlert=!0,e.value[s].alert="欄位不可以為空"):(e.value[s].state=!0,e.value[s].isAlert=!1,e.value[s].alert="")}),Object.values(e.value).every(s=>s.state)}return(s,o)=>{const _=g("router-link");return x(),b("div",N,[t("div",null,[d(C,{fontSize:32,checkWidth:40,checkHeight:40}),d(I,{width:386,height:386})]),t("div",V,[O,t("form",z,[t("div",B,[D,f(t("input",{type:"text",placeholder:"請輸入Email","onUpdate:modelValue":o[0]||(o[0]=r=>e.value.email.content=r)},null,512),[[m,e.value.email.content]]),t("p",{class:v(["noActive",{active:e.value.email.isAlert}])},h(e.value.email.alert),3)]),t("div",M,[P,f(t("input",{type:"password",placeholder:"請輸入密碼","onUpdate:modelValue":o[1]||(o[1]=r=>e.value.password.content=r)},null,512),[[m,e.value.password.content]]),t("p",{class:v(["noActive",{active:e.value.password.isAlert}])},h(e.value.password.alert),3)]),t("button",{class:"align-self-center py-12 px-5 bg-dark text-white",disabled:n.value,onClick:o[2]||(o[2]=y(r=>i()?l():null,["prevent"]))},"登入",8,U),d(_,{to:"register",class:"fw-bold text-dark align-self-center mt-4 text-decoration-none"},{default:k(()=>[T("註冊帳號")]),_:1})])])])}}},R=j($,[["__scopeId","data-v-d5e2a0bc"]]);export{R as default};
