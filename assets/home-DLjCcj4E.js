import{r as m,o as c,c as d,a as s,w as j,t as E,p as A,b as S,d as O,e as x,f as B,g as C,h as L,i as N,v as H,n as I,F as V,j as K,k as P,l as J}from"./index-DXHxGI70.js";import{_ as T,T as U}from"./TodoList-Title-DVYSxx5x.js";const W="/vite-todolist/assets/8911ab6dcbda98df56e26aa23c6643ac-CwWZoW3o.png",y=n=>(A("data-v-8f1675d9"),n=n(),S(),n),Z={key:0,class:"edit-box"},q=["value"],G=y(()=>s("span",{class:"material-icons-outlined"},"add",-1)),Q=[G],R={key:0,class:"is-nocheck"},X={key:1,class:"is-check"},Y=y(()=>s("span",{class:"material-icons-outlined"},"drive_file_rename_outline",-1)),tt=[Y],et=y(()=>s("span",{class:"material-icons-outlined"}," edit_off ",-1)),ot=[et],st=y(()=>s("span",{class:"material-icons-outlined delete-icon"},"clear",-1)),nt=[st],at={__name:"listItem",props:{sendData:{type:Object,default:()=>({})}},emits:{changeComplete:n=>{if(typeof n=="object")return!0},deleteItem:n=>{if(typeof n=="object")return!0},editItem:n=>{if(typeof n=="object")return!0},editOffItem:n=>{if(typeof n=="object")return!0},editHandle:(n,u)=>{if(typeof n=="object"&&typeof u=="string")return!0}},setup(n,{emit:u}){const l=m(""),a=n,r=u;function k(){r("changeComplete",a.sendData)}function b(){r("deleteItem",a.sendData)}function D(){r("editItem",a.sendData)}function h(){r("editOffItem",a.sendData)}function f(){r("editHandle",a.sendData,l.value)}function w(_){l.value=_.target.value}return(_,$)=>(c(),d("li",null,[a.sendData.edit?(c(),d("div",Z,[s("input",{class:"edit-input",type:"text",value:a.sendData.content,onInput:w,onKeyup:j(f,["enter"])},null,40,q),s("button",{class:"edit-addbtn",onClick:f},Q)])):(c(),d("div",{key:1,onClick:k},[a.sendData.status?(c(),d("div",X)):(c(),d("div",R)),s("p",null,E(a.sendData.content),1)])),a.sendData.edit?(c(),d("button",{key:3,class:"edit-off-link",onClick:h},ot)):(c(),d("button",{key:2,class:"edit-link",onClick:D},tt)),s("button",{class:"delete-link",onClick:b},nt)]))}},it=T(at,[["__scopeId","data-v-8f1675d9"]]),g=n=>(A("data-v-6e8023f9"),n=n(),S(),n),lt={class:"home-container"},ct={class:"input-box"},dt=g(()=>s("span",{class:"material-icons-outlined"},"add",-1)),rt=[dt],ut={key:0},ht=g(()=>s("h3",{class:"text-center"},"目前尚無代辦事項",-1)),pt=g(()=>s("img",{class:"img-nolist",src:W},null,-1)),ft=[ht,pt],_t={key:1,class:"list-box"},vt={class:"filter-btnbox"},mt={class:"todo-list"},yt={class:"d-flex align-items-baseline px-3"},gt=g(()=>s("button",{class:"ms-auto border-0 bg-white"},"清除已完成項目",-1)),p="",kt={__name:"home",setup(n){const u=m(""),l=m([]),a=m("all");O(async()=>{try{let t=await fetch("https://todolist-api.hexschool.io/todos/",{headers:{Authorization:`${p}`}});if(!t.ok){let o=await t.json();console.log("錯誤資訊",o)}(await t.json()).data.forEach(o=>{o.edit=!1,l.value.push(o)})}catch{}});const r=t=>{a.value=t},k=x(()=>{if(a.value==="all")return l.value;if(a.value==="pending")return l.value.filter(t=>{if(!t.status)return t});if(a.value==="finish")return l.value.filter(t=>{if(t.status)return t})}),b=x(()=>l.value.filter(e=>{if(!e.status)return e}).length),D=x(()=>l.value.length===0);async function h(){try{let t=await fetch("https://todolist-api.hexschool.io/todos/",{headers:{Authorization:`${p}`}});if(!t.ok){let o=await t.json();console.log("錯誤資訊",o)}const e=await t.json();l.value=[],e.data.forEach(o=>{o.edit=!1,l.value.push(o)})}catch{}}async function f(){try{const t={content:u.value},e=await fetch("https://todolist-api.hexschool.io/todos/",{cache:"no-cache",body:JSON.stringify(t),headers:{"content-type":"application/json",Authorization:`${p}`},method:"POST"});if(!e.ok){let i=await e.json();console.log("錯誤資訊",i)}const o=await e.json();console.log(o),o.status&&(h(),u.value="")}catch{}}async function w(t){try{let e=t.id,o=await fetch(`https://todolist-api.hexschool.io/todos/${e}/toggle`,{cache:"no-cache",headers:{"content-type":"application/json",Authorization:`${p}`},method:"PATCH"});if(!o.ok){let v=await o.json();console.log("錯誤資訊",v)}const i=await o.json();console.log(i),i.status&&h()}catch{}}async function _(t){try{const e=await fetch(`https://todolist-api.hexschool.io/todos/${t.id}`,{cache:"no-cache",headers:{"content-type":"application/json",Authorization:`${p}`},method:"DELETE"});if(!e.ok){let i=await e.json();console.log("錯誤資訊",i)}const o=await e.json();console.log(o),o.status&&h()}catch{}}async function $(t,e){try{const o={content:t.content},i=await fetch(`https://todolist-api.hexschool.io/todos/${t.id}`,{cache:"no-cache",body:JSON.stringify({content:e}),headers:{"content-type":"application/json",Authorization:`${p}`},method:"PUT"});if(!i.ok){let F=await i.json();console.log("錯誤資訊",F)}const v=await i.json();console.log(v),v.status&&h()}catch{}}function M(t){const e=l.value.findIndex(o=>o.id===t.id);l.value.forEach(o=>o.edit=!1),l.value[e].edit=!l.value[e].edit}function z(t){const e=l.value.findIndex(o=>o.id===t.id);l.value[e].edit=!1}return(t,e)=>{const o=B("router-link");return c(),d("div",lt,[s("header",null,[C(U),C(o,{style:{color:"red"},to:"login"},{default:L(()=>[P("登出")]),_:1})]),s("div",ct,[N(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=i=>u.value=i),onKeyup:j(f,["enter"])},null,544),[[H,u.value]]),s("button",{class:"addinput",onClick:f},rt)]),D.value?(c(),d("div",ut,ft)):(c(),d("div",_t,[s("div",vt,[s("button",{class:I([{buttonActive:a.value==="all"}]),onClick:e[1]||(e[1]=i=>r("all"))},"全部",2),s("button",{class:I([{buttonActive:a.value==="pending"}]),onClick:e[2]||(e[2]=i=>r("pending"))},"待完成",2),s("button",{class:I([{buttonActive:a.value==="finish"}]),onClick:e[3]||(e[3]=i=>r("finish"))},"已完成",2)]),s("ul",mt,[(c(!0),d(V,null,K(k.value,i=>(c(),J(it,{key:i.id,sendData:i,onChangeComplete:w,onDeleteItem:_,onEditItem:M,onEditOffItem:z,onEditHandle:$},null,8,["sendData"]))),128))]),s("div",yt,[s("p",null,E(b.value)+"個待完成項目",1),gt])]))])}}},wt=T(kt,[["__scopeId","data-v-6e8023f9"]]);export{wt as default};
